/*
Title:				Navigation Scroll Behaviour
Author:				Sam Rayner - http://samrayner.com
Created:			2011-06-07
*/var Nav={menu:null,sections:[],current:"#",docked:!1,stealClass:function(e,t){$("."+e).removeClass(e);t.addClass(e)},update:function(e){var t="current",n=Nav.menu.find("a[href="+e+"]");Nav.stealClass(t,n.parent());Nav.current=e},dock:function(){var e=$(window).scrollTop(),t=$("#main").offset();t=t.top;var n="docked";if(!Nav.docked&&e>t){Nav.docked=!0;Nav.menu.addClass(n)}else if(Nav.docked&&e<t){Nav.docked=!1;Nav.menu.removeClass(n)}},watchScroll:function(){var e=$(window).scrollTop(),t=Nav.current;$.each(Nav.sections,function(n,r){var i=r.offset();i=i.top;var s=r.selector;s.indexOf("#")!==0&&(s="#");var o=r.height()*.75;e>=i&&e<=i+o&&(t=s)});Nav.current!==t&&Nav.update(t)},init:function(){Nav.menu=$("nav.fixed");Nav.menu.find("a[href^=#]").each(function(e){var t=$(this).attr("href");t.replace("#","")===""&&(t="body");Nav.sections[e]=$(t)});$(window).scroll(Nav.dock).scroll(Nav.watchScroll);var e=Nav.menu.find("a[href^=#]").first().attr("href");window.location.hash?$.smoothScroll({speed:0,scrollTarget:window.location.hash,afterScroll:function(){Nav.update(window.location.hash)}}):Nav.update(e);$("a[href^=#]").click(function(){$(window).unbind("scroll",Nav.watchScroll)});if(Nav.menu.css("position")==="static")return!1;$("a:not([href="+e+"])").smoothScroll({afterScroll:function(){var e=$(this).attr("href");Nav.update(e);window.location.hash=e.replace("#","");$(window).scroll(Nav.watchScroll)}});var t=$(e).offset();t=t.top;$("a[href="+e+"]").smoothScroll({afterScroll:function(){Nav.update(e);window.location.hash="";$(window).scroll(Nav.watchScroll)},offset:-t})}};$(Nav.init);